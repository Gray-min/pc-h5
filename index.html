<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/minreset.css">
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <section class='wrap'>
        <!-- 头部 -->
        <header class="header w">
          <hgroup>
              <h1 class='logo'><img src="./img/logo.png"></h1>
              <nav>
              <ul class='menu-list'>
              <li>
                <a href="javascript:;">
                    <div class="front"><img src='./img/home.png'></div>
                    <div class="back"><img src='./img/home_gruen.png'></div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                    <div class="front">Course</div>
                    <div class="back">Course</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                    <div class="front">Works</div>
                    <div class="back">Works</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                    <div class="front">About</div>
                    <div class="back">About</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                    <div class="front">Team</div>
                    <div class="back">Team</div>
                </a>
              </li>
              </ul>
            </nav>
            <div class="arrow"></div>
            <div class="music">
                <img src="./img/musicon.gif" />
                <audio src="./img/audio.mp3" loop></audio>
            </div>
          </hgroup>
        </header>
        <section>
          <div class="pages">
            <ul class="page-list">
                <li>
                    <div class="content">
                        <section class="home">
                           <ul class="home-list">
                            <li class="commonTitle">
                                <div>one player</div>
                            </li>
                            <li class="commonTitle ">
                                <div>two player</div>
                            </li>
                            <li class="commonTitle">
                                <div>three player</div>
                            </li>
                            <li class="commonTitle">
                                <div>four player</div>
                            </li>
                           </ul>
                           <ul class="home-buttons">
                               <li class="active"></li>
                               <li ></li>
                               <li></li>
                               <li></li>
                           </ul>
                         </section>
                    </div>
                </li>
                <li>
                    <div class="content">
                    <section class="course">
                        <h1 class="course1 commonTitle">
                          <p>EINIGE</p>  
                         <p>UNSERER</p>   
                          <p>KUNDEN</p>  
                        </h1>
                        <article class="course2">
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus fugit reprehenderit doloribus esse natus adipisci quidem voluptatibus ut eveniet officia quibusdam repudiandae ad aliquid expedita repellat autem numquam ex provident.</p>
                            <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur maiores modi quam neque non similique ea qui officiis laborum repellat cupiditate blanditiis praesentium officia eligendi voluptates veniam iure est quidem.</P>
                        </article>
                        <ul class="course3">
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <li>
                                <div class="facewrap">
                                    <div class="face"></div>
                                    <div class="faceback">test</div>
                                </div>
                             
                            </li>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                        </ul>
                        <div class="plane1"><img src="./img/plane1.png"/></div>
                        <div class="plane2"><img src="./img/plane2.png"/></div>
                        <div class="plane3"><img src="./img/plane3.png"/></div>
                    </section>
                    </div>
                </li>
                <li>
                <div class="content">
                    <section class="works">
                        <h1 class="works1 commonTitle">
                            <p>EINBLICK</p>
                            <p>ERKENNITNIS</p>
                            <p>ERGEBNIS</p>
                        </h1>
                        <ul class="works2">
                            <li>
                                <a href="javascript:;">
                                   <div class="mask">
                                    测试文字
                                      <div class='icon'></div>
                                   </div>
                                    <img src="./img/worksimg1.jpg" alt=""/>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                   <div class="mask">
                                    测试文字
                                   <div class='icon'></div>
                                   </div>
                                    <img src="./img/worksimg2.jpg" alt=""/>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                   <div class="mask">
                                    测试文字
                                   <div class='icon'></div>
                                   </div>
                                    <img src="./img/worksimg3.jpg" alt=""/>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                   <div class="mask">
                                       测试文字
                                   <div class='icon'></div>
                                   </div>
                                    <img src="./img/worksimg4.jpg" alt=""/>
                                </a>
                            </li>
                        </ul>
                        <div class="works3"></div>
                        <div class="pencil1"><img src="./img/pencil1.png"/></div>
                        <div class="pencil2"><img src="./img/pencil2.png"/></div>
                        <div class="pencil3"><img src="./img/pencil3.png"/></div>
                    </section>
                </div>
            </li>
                <li><div class="content">
                    <section class="about">
                        <h1 class="about1 commonTitle">
                            <p>DIE</p>  
                           <p>SPEZIELLE</p>   
                            <p>VIELFALT</p>  
                          </h1>
                          <article class="about2 commonText">
                              <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur maiores modi quam neque non similique ea qui officiis laborum repellat cupiditate blanditiis praesentium officia eligendi voluptates veniam iure est quidem.</P>
                          </article>
                          <div class="about3">
                          </div>
                          <div class="about4">
                              <div class="item">
                               <img src="./img/about2.jpg"/>
                               <ul class="imgs" data-src="./img/about1.jpg">
                                <li></li>
                                <li></li>
                                <li></li>
                                <li></li>
                               </ul>
                              </div>
                              <div class="item">
                                <img src="./img/about4.jpg"/>
                                <ul class="imgs"  data-src="./img/about3.jpg">
                                    <li></li>
                                    <li></li>
                                    <li></li>
                                    <li></li>
                                </ul>
                              </div>
                          </div>
                    </section>
                </div></li>
                <li><div class="content">
             <section class="team">
                <h1 class="team1 commonTitle">
                    <p>WIR SIND</p>  
                   <p>VOXELATR</p>   
                  </h1>
                  <article class="team2 commonText">
                    <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur maiores modi quam neque non similique ea qui officiis laborum repellat cupiditate blanditiis praesentium officia eligendi voluptates veniam iure est quidem.</P>
                    <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur maiores modi quam neque non similique ea qui officiis laborum repellat cupiditate blanditiis praesentium officia eligendi voluptates veniam iure est quidem.</P> 
                  </article>
                  <div class="team3">
                      <ul class="members"></ul>
                  </div>
             </section>
                </div></li>
            </ul>
        </div>
        </section>
        <ul class="dot">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="mask">
            <div class="up"></div>
            <div class="center"></div>
            <div class="down"></div>
        </div>
    </section>
    <script>
  window.onload=function(){
    const pages=document.querySelector('.pages')
    const header=document.querySelector('.header')
    const plis=document.querySelectorAll('.pages>.page-list>li')
    const menuNodes=document.querySelectorAll('.header>hgroup nav .menu-list li')
    const pageList=document.querySelector('.page-list')
    const arrow=document.querySelector('.arrow')
    
    //第一屏中所有切换页面li
    const homeListlis=document.querySelectorAll('.page-list .content .home .home-list li')   
    //第一屏底部按钮
    const homeButtons=document.querySelectorAll('.page-list .content .home .home-buttons li')
    const home=document.querySelector('.page-list .content .home')

    //第四屏
    const ulImgs=document.querySelectorAll('.page-list .content .about .about4 .item .imgs')

    //第五屏幕
    const members=document.querySelector('.page-list .content .team .team3 .members')

    //右侧导航按钮
    const dot=document.querySelectorAll('.dot li')

    //音频按钮
    const audio=document.querySelector('.music audio')
    //音频按钮图片
    const audioPic=document.querySelector('.music img')
    let timer=0
    let now=0
    homeListlis[0].style.visibility='visible'

    contentBind()
    function contentBind(){
        pages.style.height=document.documentElement.clientHeight-header.offsetHeight+'px'
     for(let i=0;i<plis.length;i++){
         plis[i].style.height=document.documentElement.clientHeight-header.offsetHeight+'px'
     }
    }

    window.onresize = function(){
				contentBind();
                move(now)
			}
  //开机动画
  loadingAn()
  function loadingAn(){
    animations[0].outAn()
  var imgArr = ['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg','about1.jpg','about2.jpg','about3.jpg','about4.jpg','worksimg1.jpg','worksimg2.jpg','worksimg3.jpg','worksimg4.jpg','team.png','greenLine.png'];
  const up=document.querySelector('.wrap .mask .up')
  const center=document.querySelector('.wrap .mask .center')
  const down=document.querySelector('.wrap .mask .down')
  let flag=0
  for(let i=0;i<imgArr.length;i++)
  {
      const img=new Image()
      img.src='./img/'+imgArr[i]
      img.onload=()=>{
       flag++
       center.style.width=flag/imgArr.length*100+'%'
      }
  }
  center.addEventListener('transitionend',()=>{
      center.style.display='none'
      up.style.height=0
      down.style.height=0
  })
  up.addEventListener('transitionend',()=>{
      up.parentElement.remove()
      move(now)
      autoPlay()
      animations[0].inAn()
      audio.play()
  })
  }

//音频
    audio.parentElement.onclick = function(){
					if(audio.paused){
					    audio.play()
						audioPic.src = "./img/musicon.gif"
					}else{
					    audio.pause()
						audioPic.src = "./img/musicoff.gif"
					}
			}
    //菜单监听绑定
     for(let i=0;i<menuNodes.length;i++){
      (function(i){
            menuNodes[i].addEventListener('click',()=>{
                move(i)
                now=i
            })
      })(i)
     }

 //滚动监听一般浏览器
       pages.onmousewheel=function(ev){
        ev=ev||event
        clearTimeout(timer)
        timer=  setTimeout(()=>{
               scroll(ev)
           },500)
       }
//滚动监听火狐
         pages.addEventListener('DOMMouseScroll',function(ev){
        ev=ev||event
        clearTimeout(timer)
        timer=  setTimeout(()=>{
               scroll(ev)
           },500)
         })
//整体滚动
     function scroll(ev){
          let dir=''
        if(ev.wheelDelta){
            dir=ev.wheelDelta>0?'up':'down'
        }else if(ev.detail){
            dir=ev.wheelDelta<0?'up':'down'
        }
       switch (dir) {
           case 'up':
            now>0?now--:now=0
               move(now)
               break;
           case 'down':
                now<menuNodes.length-1?now++:now=menuNodes.length-1
                move(now)
               break;
       }
     }
     
     //处理滚动
     function move(index){
        for(let i=0;i<menuNodes.length;i++){
            menuNodes[i].children[0].children[1].style.width=''
        }
        pageList.style.top=-index*(document.documentElement.clientHeight-header.offsetHeight)+'px'
        arrow.style.left= menuNodes[index].offsetLeft+menuNodes[index].children[0].clientWidth/2-arrow.offsetWidth/2+'px'
        menuNodes[index].children[0].children[1].style.width='100%'
        for(let j=0;j<dot.length;j++){
        dot[j].classList.remove('active')
        }
        dot[index].classList.add('active')
        for(let i=0;i<animations.length;i++){
            animations[i].outAn()
        }
        animations[index].inAn()
     }
 
    //第一屏按钮事件绑定
    let pageIndex=0
    let autoIndex=0
    let timer3D=0
    for(let i=0;i<homeButtons.length;i++){
        ;(function(i){
            homeButtons[i].addEventListener('click',function(){
             pageSwitch(i,'hand')
            })
        })(i)
    }
    //第一屏中页面切换
    function pageSwitch(index,type='auto'){
        homeListlis[0].style=''
    for(let i=0;i<homeListlis.length;i++){
     homeListlis[i].classList.remove('leftHide','leftShow','rightHide','rightShow')      
    }
    for(let i=0;i<homeButtons.length;i++){
        homeButtons[i].classList.remove('active')      
    }
    if(type==='auto'){
        homeListlis[pageIndex].classList.add('leftHide')
    homeListlis[index].classList.add('rightShow')
    }
    else{
        if(pageIndex<index){
    homeListlis[pageIndex].classList.add('leftHide')
    homeListlis[index].classList.add('rightShow')
    }
    if(pageIndex>index){
    homeListlis[pageIndex].classList.add('rightHide')
    homeListlis[index].classList.add('leftShow')
    }
    }
   
    homeButtons[index].classList.add('active')
    pageIndex=index
    autoIndex=pageIndex
    }

    function autoPlay(){
     clearInterval(timer3D)
     timer3D=setInterval(()=>{
        autoIndex++
         if(autoIndex===homeButtons.length){
            autoIndex=0
         }
       pageSwitch(autoIndex)
     },3000)
    }
   home.addEventListener('mouseenter',()=>{
       clearInterval(timer3D)
   })

   //第四屏幕
   const w=ulImgs[0].offsetWidth
   const h=ulImgs[0].clientHeight
   //图片初始化
   for(let i=0;i<ulImgs.length;i++){
    init(ulImgs[i])
   }

   function init(ul){
    const lis= ul.querySelectorAll('li')
   const src=ul.dataset.src
     for(let j=0;j<lis.length;j++){
        const img=new Image()
       img.src=src
       img.style.width=w+'px'
       img.style.height=h+'px'
       img.style.left=-j%2*w/2+'px'
       img.style.top=-Math.floor(j/2)*h/2+'px'
       img.onload=()=>{
           lis[j].style.width=w/2+'px'
           lis[j].style.height=h/2+'px'
           lis[j].appendChild(img)
       }
     }
   }
//图片裂开效果
   for(let i=0;i<ulImgs.length;i++){
       ulImgs[i].addEventListener('mouseenter',function(){
        const lis= this.querySelectorAll('li')
           lis[0].children[0].style.top=h/2+'px'
           lis[1].children[0].style.left=-w+'px'
           lis[2].children[0].style.left=w/2+'px'
           lis[3].children[0].style.top=-h+'px'
       })
     ulImgs[i].addEventListener('mouseleave',function(){
            const lis= this.querySelectorAll('li')
           lis[0].children[0].style.top=0
           lis[1].children[0].style.left=-w/2+'px'
           lis[2].children[0].style.left=0
           lis[3].children[0].style.top=-h/2+'px'
     })
   }
  
  //第五屏
   const team3W=members.parentElement.clientWidth
   const team3H=members.parentElement.clientHeight
   let qipao1=0
   let qipao2=0
   let canvas=null
   for(let i=0;i<8;i++){
       const li=document.createElement('li')
       li.style.width=team3W/8+'px'
       li.style.height=team3H+'px'
       const img=new Image()
       img.src='./img/team.png'
       img.style.left=-team3W/8*i+'px'
       img.onload=()=>{
           li.appendChild(img)
       }
       li.addEventListener('mouseenter',function(){
           addCanvas(this)
       })
       members.appendChild(li)
   }

   function addCanvas(li){
       if(canvas){
         removeCanvas()
       }
       canvas=document.createElement('canvas')
       canvas.addEventListener('mouseenter',enterCanvas(li))
       canvas.width=team3W/8
       canvas.height=team3H
       canvas.style.left=li.offsetLeft+'px'
       members.parentElement.appendChild(canvas)
   }
  //移除canvas
   function removeCanvas(){
   clearInterval(qipao1)
   clearInterval(qipao2)
   canvas.remove()
   canvas=null
   }
   //气泡
   function qipao(){
    if(canvas.getContext){
      const ctx=canvas.getContext('2d')
      const arr=[] 

   qipao1= setInterval(() => {
        ctx.clearRect(0,0,canvas.width,canvas.height)
       
    for(let i=0;i<arr.length;i++){
        arr[i].deg+=5
       arr[i].x=arr[i].startX+Math.sin(arr[i].deg*Math.PI/180)*arr[i].size
       arr[i].y= arr[i].startY-arr[i].deg*Math.PI/180*arr[i].size
       if(arr[i].y<=20){
           arr.splice(i,1)
       }
    }

     for(let i=0;i<arr.length;i++){
         ctx.save()
         ctx.fillStyle=`rgba(${arr[i].red},${arr[i].green},${arr[i].blue},${arr[i].alp})`
         ctx.beginPath()
         ctx.arc(arr[i].x,arr[i].y,arr[i].r,0,2*Math.PI)
         ctx.fill()
         ctx.restore()
     }

    }, 1000/60);

      
    qipao2= setInterval(() => {
          const r=Math.random()*8+2
          const x=canvas.width*Math.random()
          const y=canvas.height-r
          const red=Math.random()*255
          const green=Math.random()*255
          const blue=Math.random()*255
          const alp=1

          const deg=Math.random()*20+10
          const size=Math.random()*50+10
          const startX=x
          const startY=y
          arr.push({
              x,y,r,red,green,blue,alp,deg,size,startX,startY
          })

      }, 100);
     
   }
  }
   
   //移入效果
   function enterCanvas(li){
    qipao()
       const lis =members.querySelectorAll('li')
       for(let i=0;i<lis.length++;i++){
           lis[i].style.opacity=0.3
       }
       li.style.opacity=1
   }

   //移出canvas
   function leave(){
    const lis =members.querySelectorAll('li')
       for(let i=0;i<lis.length++;i++){
           lis[i].style.opacity=1
       }
       removeCanvas()
   }

   members.parentElement.addEventListener('mouseleave',leave)

//右侧导航按钮
 for(let i=0;i<dot.length;i++){
 ;(function(i){
  dot[i].addEventListener('click',function(){
   
      move(i)
  })
 })(i)

 }
  }

  //出入场动画
  const animations=[
 {
    homeList:document.querySelector('.page-list .content .home .home-list'),
    homeButtons:document.querySelector('.page-list .content .home .home-buttons'),
     inAn:function(){
    this.homeList.style.transform='translateY(0)'
    this. homeButtons.style.transform='translateY(0)'
     },
     outAn:function(){
        this. homeList.style.transform='translateY(-200px)'
        this. homeButtons.style.transform='translateY(100px)'
     }
 },{
    plane1:document.querySelector('.content .course .plane1'),
    plane2:document.querySelector('.content .course .plane2'),
    plane3:document.querySelector('.content .course .plane3'),
     inAn:function(){
        this.plane1.style.transform='translate(0)'
        this.plane2.style.transform='translate(0)'
        this.plane3.style.transform='translate(0)'
     },
     outAn:function(){
         this.plane1.style.transform='translate(-20%,-20%)'
         this.plane2.style.transform='translate(-20%,20%)'
         this.plane3.style.transform='translate(20%,-20%)'
     }
 },
 {
    pencil1:document.querySelector('.content .works .pencil1'),
    pencil2:document.querySelector('.content .works .pencil2'),
    pencil3:document.querySelector('.content .works .pencil3'),
     inAn:function(){
         console.log(this.pencil1)
        this.pencil1.style.transform='translate(0)'
        this.pencil2.style.transform='translate(0)'
        this.pencil3.style.transform='translate(0)'
     },
     outAn:function(){
        this.pencil1.style.transform='translateY(-30%)'
        this.pencil2.style.transform='translateY(30%)'
        this.pencil3.style.transform='translateY(30%)'
     }
 },
 {   pic1:document.querySelectorAll('.page-list .content .about .about4 .item')[0],
     pic2:document.querySelectorAll('.page-list .content .about .about4 .item')[1],
     inAn:function(){
         console.log(this.pic1)
        this.pic1.style.transform='rotate(0)'
         this.pic2.style.transform='rotate(0)'
     },
     outAn:function(){
         this.pic1.style.transform='rotate(30deg)'
         this.pic2.style.transform='rotate(-30deg)'
     }
 },
 {   team1:document.querySelector('.content .team1'),
     team2:document.querySelector('.content .team2'),
     inAn:function(){
        this.team1.style.transform='translateX(0)'
         this.team2.style.transform='translateX(0)'
     },
     outAn:function(){
         this.team1.style.transform='translateX(-20%)'
         this.team2.style.transform='translateX(20%)'
     }
 }
  ]
 


    </script>
</body>
</html>